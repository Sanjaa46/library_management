{"version":3,"file":"Profile-C27CWxr1.js","sources":["../../../../frontend/src/assets/images/testpro.jpeg","../../../../frontend/src/assets/components/ProfileInfo.vue","../../../../frontend/src/assets/components/ArticleListItem.vue","../../../../frontend/src/assets/components/MyBooks.vue","../../../../frontend/src/assets/components/ChangePassword.vue","../../../../frontend/src/pages/Profile.vue"],"sourcesContent":["export default \"__VITE_ASSET__CAuA00NF__\"","<template>\n\n<div>\n    <h1 class=\" pl-[20px] pb-[20px] text-[30px] font-bold\">Info</h1>\n    <ul class=\" pl-[20px] space-y-4\">\n        <li>\n            <p class=\" text-black-overlay-500\">ID</p>\n            <p>{{ props.user.id }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Firstname</p>\n            <p>{{ props.user.first_name }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Lastname</p>\n            <p>{{ props.user.last_name }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Email</p>\n            <p>{{ props.user.email }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Phone</p>\n            <p>{{ props.user.phone }}</p>\n        </li>\n    </ul>\n</div>\n\n</template>\n\n\n<script setup>\nimport { ref, onMounted } from 'vue';\n\nconst props = defineProps({\n  user: {\n    type: Object,\n    required: true\n  }\n});\n\n</script>","<template>\n<tr class=\"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200\">\n    <th scope=\"row\" class=\"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white\">\n        {{ book.article }}\n    </th>\n    <td class=\"px-6 py-4\">\n        {{ book.issue_date }}\n    </td>\n    <td class=\"px-6 py-4\">\n        {{ book.due_date }}\n    </td>\n</tr>\n</template>\n\n<script setup>\nimport { defineProps } from 'vue';\ndefineProps({\n  book: {\n    type: Object,\n    required: true\n  }\n});\n</script>","<template>\n\n<h1 class=\" pl-[20px] pb-[20px] text-[30px] font-bold\">My Books</h1>\n\n\n\n<div class=\" w-[90%] relative mx-auto overflow-x-auto shadow-md sm:rounded-lg\">\n    <table class=\"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400 \">\n        <thead class=\"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400\">\n            <tr>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                    Article name\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                    Issued Date\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                    Due Date\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <ArticleListItem v-for=\"book in books\" :key=\"book.article_name\" :book=\"book\" />\n        </tbody>\n    </table>\n</div>\n\n\n</template>\n\n\n<script setup>\nimport ArticleListItem from './ArticleListItem.vue';\nimport { onMounted, ref } from 'vue';\n\nconst books = ref([])\n\nonMounted(async () => {\n    try {\n        const response = await fetch('/api/method/library_management.api.my_books', {\n            credentials: 'include'\n        })\n        const data = await response.json();\n        books.value = data.message\n\n    } catch (error) {\n        console.error(\"Failed to fetch books: \", error)\n        books.value = []\n    }\n})\n\n\n</script>","<template>\n\n<div class=\"pl-[30px]\">\n    <Card title=\"Login to your FrappeUI App!\" class=\" z-10  rounded-xl\">\n    <h2 class=\"text-[30px] font-bold mb-8\">Change Password</h2>\n    <form class=\" space-y-5 \" @submit.prevent=\"submit\">\n        <Input\n        required\n        v-model=\"current_password\"\n        name=\"current\"\n        type=\"password\"\n        placeholder=\"Current password\"\n        class=\"w-[300px]\"\n        />\n        <Input\n        required\n        v-model=\"new_password\"\n        name=\"password\"\n        type=\"password\"\n        class=\"w-[300px]\"\n        placeholder=\"New password\"\n        />\n        <Input\n        required\n        v-model=\"re_enter_new_password\"\n        name=\"password\"\n        type=\"password\"\n        class=\"w-[300px]\"\n        placeholder=\"Re-enter new password\"\n        />\n        <Button @click=\"handleChangePassword\" variant=\"solid\" class=\"bg-[#1290b9] text-white py-2 rounded hover:bg-[#016475] transition\">\n        Chnage Password\n        </Button>\n    </form>\n    </Card>\n</div>\n\n</template>\n\n\n<script setup>\nimport { ref } from 'vue'\n\nconst current_password = ref(\"\");\nconst new_password = ref(\"\");\nconst re_enter_new_password = ref(\"\");\n\nasync function handleChangePassword() {\n    if (current_password.value === new_password.value) {\n        alert(\"New password must be different!\")\n        return\n    }\n    \n    if (new_password.value !== re_enter_new_password.value) {\n        alert(\"Password did not match!\")\n        return\n    }\n\n    try {\n        const url = `/api/method/library_management.api.change_password`\n\n        const response = await fetch(url, {\n            credentials: 'include',\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                old_password: current_password.value,\n                new_password: new_password.value,\n            })\n        })\n        const data = await response.json()\n\n        if (data.message.Success) {\n            alert(\"Password changed succesfully!\")\n        } else {\n            console.log(data)\n            alert(\"Old password is incorrect!\")\n        }\n\n    } catch (error) {\n        console.log(\"Change password failed: \", error)\n        console.error('Error details:', {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        })\n        alert('Change password failed. Please check console for details.')\n    }\n}\n\n</script>","<template>\n    <Header></Header>\n    <div class=\"w-[1120px] my-8 mx-auto text-[24px] font-bold relative\">\n        <div class=\"absolute w-1 h-12 bg-[#118ab2] left-0\"></div>\n        <h1 class=\"text-4xl font-bold pl-5 pt-2\">Profile</h1>\n    </div>\n    <section class=\"flex max-w-[1120px] h-[60%] mx-auto my-15\">\n        <!-- Pro Image, Fullname and three buttons -->\n        <div class=\" w-[30%]\">\n            <a @click=\"current = 'ProfileInfo'\">\n                <div class=\"w-[250px] h-[250px] mx-auto my-5 p-[7px] border-[3px] border-[#118ab2] rounded-full\">\n                    <img class=\"m-auto w-[235px] h-[235px] object-fill rounded-[50%]\" src=\"../assets/images/testpro.jpeg\" alt=\"profile image\">\n                </div>\n            </a>\n            <p class=\"w-[50%] m-auto text-center text-[20px] font-bold\">{{ first_name + \" \" + last_name }}</p>\n            <div \n                :class='[\"w-[30%] m-auto rounded-full italic text-[10px]\", statusClasses]'\n            >\n                <p class=\"text-center\"><b>Status:</b> {{ statusText }}</p>\n            </div>\n\n            <!-- Buttons -->\n            <div class=\"flex flex-col items-center space-y-3 mt-5\">\n                <button \n                v-if=\"!membership\"\n                    @click=\"createCheckoutSession\"\n                    :class='[\" w-[215px] h-[35px] mt-5 bg-[#118ab2] hover:bg-[#016475] text-white-overlay-900 rounded-[10px]\", buyButtonClasses]'\n                >\n                    Buy Membership\n                </button>\n                <button @click=\"current = 'ChangePassword'\">\n                    Change Password >\n                </button>\n                <button @click=\"current = 'MyBooks'\">\n                    My Books >\n                </button>\n                <button\n                @click=\"handleLogout\"\n                class=\" w-[215px] h-[35px] mt-5 bg-[#118ab2] hover:bg-[#016475] text-white-overlay-900 rounded-[10px]\"\n                >\n                    Logout\n                </button>\n            </div>\n        </div>\n\n        <!-- Line -->\n        <div class=\"relative h-[475px] w-1 bg-[#118ab2] left-[-1px] top-[30px]\"></div>\n        \n        <!-- Info, Change Password and My Books -->\n        <div class=\"w-[70%]\">\n            <component :is=\"currentComponent\" :user=\"user\" />\n        </div>\n\n    </section>\n    <Footer></Footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport { session } from '../data/session';\nimport Header from '../assets/components/Header.vue';\nimport Footer from '../assets/components/Footer.vue';\nimport ProfileInfo from '../assets/components/ProfileInfo.vue';\nimport MyBooks from '../assets/components/MyBooks.vue';\nimport ChangePassword from '../assets/components/ChangePassword.vue';\n\nconst componentsMap = {\n    ProfileInfo,\n    ChangePassword,\n    MyBooks\n}\n\nconst current = ref('ProfileInfo')\n\nconst currentComponent = computed(() => componentsMap[current.value])\n\nconst user = ref({})\nconst first_name = ref(\"John\");\nconst last_name = ref(\"Doe\");\nconst membership = ref(false)\nconst checkoutUrl = ref(\"\")\n\nconst statusText = computed(() => {\n    return membership.value ? \"Membership\" : \"Nonmembership\"\n})\n\nconst statusClasses = computed(() => {\n    return membership.value \n        ? \"text-green-700 bg-green-300\" \n        : \"text-red-700 bg-red-300\"\n})\n\nconst buyButtonClasses = computed(() => {\n    return membership.value\n        ? \"opacity-0\"\n        : \"opacity-100\"\n})\n\nonMounted(async () => {\n    try {\n        const response = await fetch('/api/method/library_management.api.profile', {\n            credentials: 'include',\n            method: 'GET',\n            headers: { \"Content-Type\": \"application/json\" }\n        });\n        const data = await response.json();\n\n        first_name.value = data.message.first_name;\n        last_name.value = data.message.last_name;\n        membership.value = data.message.membership;\n\n        user.value = {\n            id: data.message.id,\n            first_name: data.message.first_name,\n            last_name: data.message.last_name,\n            phone: data.message.phone,\n            email: data.message.email\n        }\n    } catch (error) {\n        console.error('Failed to fetch user info:', error);\n    }\n});\n\nasync function createCheckoutSession() {\n\n    const url = `/api/method/library_management.api.create_checkout_session`;\n\n    const response = await fetch(url, {\n        credentials: 'include',\n        method: 'POST'\n    })\n    const data = await response.json();\n    console.log(data)\n\n    checkoutUrl.value = data.message.url\n    window.location.href = checkoutUrl.value\n\n}\n\nfunction handleLogout() {\n    session.logout.submit();\n}\n\n</script>"],"names":["_imports_0","props","__props","_createElementBlock","_cache","_createElementVNode","_hoisted_1","_toDisplayString","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","books","ref","onMounted","__async","data","error","_Fragment","_renderList","book","_createBlock","ArticleListItem","current_password","new_password","re_enter_new_password","handleChangePassword","_createVNode","_component_Card","_ctx","args","_component_Input","$event","_component_Button","componentsMap","ProfileInfo","ChangePassword","MyBooks","current","currentComponent","computed","user","first_name","last_name","membership","checkoutUrl","statusText","statusClasses","buyButtonClasses","createCheckoutSession","handleLogout","session","Header","_createTextVNode","_hoisted_5","_hoisted_6","_resolveDynamicComponent","Footer"],"mappings":"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"}