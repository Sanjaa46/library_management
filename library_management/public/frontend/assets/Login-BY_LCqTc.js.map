{"version":3,"file":"Login-BY_LCqTc.js","sources":["../../../../frontend/src/pages/Login.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-[100%] m-3 grid grid-cols-2 h-screen\">\n    <!-- LEFT SIDE -->\n    <div class=\"flex items-center justify-center\">\n      <Card title=\"Login to your FrappeUI App!\" class=\"w-full max-w-md bg-[#f7f4f0] z-10 px-12 py-10 rounded-xl shadow-lg\">\n        <h2 class=\"text-xl font-medium text-center mb-8\">Sign In</h2>\n        <form class=\"flex flex-col space-y-5 w-full\" >\n          <Input\n            required\n            v-model=\"email\"\n            name=\"email\"\n            type=\"text\"\n            placeholder=\"Email\"\n          />\n          <Input\n            required\n            v-model=\"password\"\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n          <div class=\"text-sm text-right text-gray-500 cursor-pointer hover:underline\">\n            Forgot password?\n          </div>\n          <Button @click=\"handleLogin\" variant=\"solid\" class=\"bg-[#007C91] text-white py-2 rounded hover:bg-[#006273] transition\">\n            Login\n          </Button>\n        </form>\n        <div class=\"text-center mt-6 text-sm\">\n          Don't have an account?\n          <a href=\"/account/signup\" class=\"text-blue-600 hover:underline\">\n            Sign up\n          </a>\n        </div>\n      </Card>\n    </div>\n\n    <!-- RIGHT SIDE: Shapes -->\n    <div class=\"relative overflow-hidden -m-10\">\n      <div class=\"bg-[#2C3E50] w-[100%] h-[120%] absolute -top-20 right-[-100px] -rotate-12 origin-top-right rounded-tl-[20px]\"></div>\n\n      <div class=\"bg-[#254B71] w-[150%] h-[150%] absolute bottom-[8px] right-[-400px] rotate-[60deg] origin-bottom-left\"></div>\n\n      <div class=\"bg-[#577592] w-[85%] h-[60%] absolute top-[-380px] right-[40px] rotate-12 rounded-bl-[20px] rounded-br-[20px]\"></div>\n    </div> \n  </div>\n\n\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n\nconst email = ref('')\nconst password = ref('')\nconst userType = ref('member')\n\nasync function handleLogin() {\n  if (userType.value === 'member') {\n    await loginLibraryMember()\n  } else {\n    await loginStaff()\n  }\n}\n\nasync function loginLibraryMember() {\n  console.log('Email:', email.value)\n  console.log('Timestamp:', new Date().toISOString())\n  \n  try {\n    const response = await fetch('http://localhost:8000/api/method/library_management.auth.login', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', },\n      body: JSON.stringify({\n        email: email.value,\n        password: password.value,\n      })\n    })\n    \n    console.log('Response loginLibraryMember Status:', response.status)\n    console.log('Response OK:', response.ok)\n    \n    const data = await response.json()\n    console.log('Response Data:', data)\n\n    if (data.message && data.message.access_token) {\n      localStorage.setItem('library_token', data.message.access_token)\n      console.log('Token saved successfully to local storage')\n      console.log('Token:', data.message.access_token.substring(0, 20) + '...')\n      alert('Login successful!')\n    } else {\n      console.error('Login failed - No access token in response')\n      console.error('Response structure:', JSON.stringify(data, null, 2))\n      alert('Invalid Member login')\n    }\n  } catch (error) {\n    console.error('Login error occurred:', error)\n    console.error('Error details:', {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    })\n    alert('Login failed. Please check console for details.')\n  }\n  \n}\n\nasync function loginStaff() {\n  try {\n    alert(\"Hello\")\n    const response = await fetch('/api/method/login', {\n      method: 'POST',\n      headers: { 'Content-type': 'application/json' },\n      body: JSON.stringify({\n        usr: email.value,\n        pwd: password.value,\n      })\n    })\n    const data = await response.json()\n    if (data.message === 'Logged In') {\n      window.location.href = '/app'\n    } else {\n      alert(\"Invalid staff login\")\n    }\n  } catch (error) {\n    console.error('Login error occurred:', error)\n    console.error('Error details:', {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    })\n    alert('Login failed. Please check console for details.')\n  }\n\n\n}\n\n\n</script>\n"],"names":["email","ref","password","userType","handleLogin","__async","loginLibraryMember","loginStaff","response","data","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_Card","_cache","_hoisted_3","_component_Input","$event","_component_Button"],"mappings":"idAqDA,MAAMA,EAAQC,EAAI,EAAE,EACdC,EAAWD,EAAI,EAAE,EACjBE,EAAWF,EAAI,QAAQ,EAE7B,SAAeG,GAAc,QAAAC,EAAA,sBACvBF,EAAS,QAAU,SACrB,MAAMG,EAAkB,EAExB,MAAMC,EAAU,CAEpB,GAEA,SAAeD,GAAqB,QAAAD,EAAA,sBAClC,QAAQ,IAAI,SAAUL,EAAM,KAAK,EACjC,QAAQ,IAAI,aAAc,IAAI,KAAI,EAAG,YAAW,CAAE,EAElD,GAAI,CACF,MAAMQ,EAAW,MAAM,MAAM,iEAAkE,CAC7F,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAkB,EAC7C,KAAM,KAAK,UAAU,CACnB,MAAOR,EAAM,MACb,SAAUE,EAAS,KAC3B,CAAO,CACP,CAAK,EAED,QAAQ,IAAI,sCAAuCM,EAAS,MAAM,EAClE,QAAQ,IAAI,eAAgBA,EAAS,EAAE,EAEvC,MAAMC,EAAO,MAAMD,EAAS,KAAI,EAChC,QAAQ,IAAI,iBAAkBC,CAAI,EAE9BA,EAAK,SAAWA,EAAK,QAAQ,cAC/B,aAAa,QAAQ,gBAAiBA,EAAK,QAAQ,YAAY,EAC/D,QAAQ,IAAI,2CAA2C,EACvD,QAAQ,IAAI,SAAUA,EAAK,QAAQ,aAAa,UAAU,EAAG,EAAE,EAAI,KAAK,EACxE,MAAM,mBAAmB,IAEzB,QAAQ,MAAM,4CAA4C,EAC1D,QAAQ,MAAM,sBAAuB,KAAK,UAAUA,EAAM,KAAM,CAAC,CAAC,EAClE,MAAM,sBAAsB,EAEhC,OAASC,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,QAAQ,MAAM,iBAAkB,CAC9B,KAAMA,EAAM,KACZ,QAASA,EAAM,QACf,MAAOA,EAAM,KACnB,CAAK,EACD,MAAM,iDAAiD,CACzD,CAEF,GAEA,SAAeH,GAAa,QAAAF,EAAA,sBAC1B,GAAI,CACF,MAAM,OAAO,GASA,MARI,MAAM,MAAM,oBAAqB,CAChD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAkB,EAC7C,KAAM,KAAK,UAAU,CACnB,IAAKL,EAAM,MACX,IAAKE,EAAS,KACtB,CAAO,CACP,CAAK,GAC2B,KAAI,GACvB,UAAY,YACnB,OAAO,SAAS,KAAO,OAEvB,MAAM,qBAAqB,CAE/B,OAASQ,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5C,QAAQ,MAAM,iBAAkB,CAC9B,KAAMA,EAAM,KACZ,QAASA,EAAM,QACf,MAAOA,EAAM,KACnB,CAAK,EACD,MAAM,iDAAiD,CACzD,CAGF,8DAtIE,OAAAC,EAAA,EAAAC,EA4CM,MA5CNC,EA4CM,CA1CJC,EAgCM,MAhCNC,EAgCM,CA/BJC,EA8BOC,EAAA,CA9BD,MAAM,8BAA8B,MAAM,iFAC9C,IAA6D,CAA7DC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAA6D,KAAA,CAAzD,MAAM,sCAAsC,EAAC,UAAO,EAAA,GACxDA,EAqBO,OArBPK,EAqBO,CApBLH,EAMEI,EAAA,CALA,SAAA,cACSpB,EAAA,2CAAAA,EAAK,MAAAqB,GACd,KAAK,QACL,KAAK,OACL,YAAY,gCAEdL,EAMEI,EAAA,CALA,SAAA,cACSlB,EAAA,2CAAAA,EAAQ,MAAAmB,GACjB,KAAK,WACL,KAAK,WACL,YAAY,mCAEdH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAJ,EAEM,MAAA,CAFD,MAAM,iEAAiE,EAAC,qBAE7E,EAAA,GACAE,EAESM,EAAA,CAFA,QAAOlB,EAAa,QAAQ,QAAQ,MAAM,iFAAqE,IAExH,CAAA,GAAAc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFwH,UAExH,EAAA,0BAEFJ,EAKM,MAAA,CALD,MAAM,4BAA0B,GAAC,0BAEpC,EAAAA,EAEI,IAAA,CAFD,KAAK,kBAAkB,MAAM,iCAAgC,WAEhE,8BAMNA,EAMM,MAAA,CAND,MAAM,kCAAgC,CACzCA,EAAgI,MAAA,CAA3H,MAAM,8GAA8G,CAAA,EAEzHA,EAAyH,MAAA,CAApH,MAAM,uGAAuG,CAAA,EAElHA,EAAiI,MAAA,CAA5H,MAAM,+GAA+G,CAAA"}