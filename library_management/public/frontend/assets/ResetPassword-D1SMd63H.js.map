{"version":3,"file":"ResetPassword-D1SMd63H.js","sources":["../../../../frontend/src/pages/ResetPassword.vue"],"sourcesContent":["<template>\n  <div class=\"max-w-[100%] m-3 grid grid-cols-1 h-screen\">\n    <Card title=\"Login to your FrappeUI App!\" class=\"w-full max-w-md m-auto bg-[#f7f4f0] z-10 px-12 py-10 rounded-xl shadow-lg\">\n        <h2 class=\"text-3xl font-medium text-center \">Reset Password</h2>\n        <form class=\"flex flex-col space-y-5 w-full\" @submit.prevent=\"resetPassword\">\n            <Input\n            required\n            v-model=\"newPassword\"\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"New password\"\n            class=\"h-10 my-3\"\n            />\n            <Button variant=\"solid\" class=\"bg-[#007C91] text-white py-2 rounded hover:bg-[#006273] transition\">\n                Reset Password\n            </Button>\n        </form>\n    </Card>\n</div>\n\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst newPassword = ref(\"\")\nconst resetToken = ref(\"\")\n\nonMounted(async () => {\n    resetToken.value = route.query.token;\n\n    if(!resetToken.value){\n        alert(\"Reset password token not found!\")\n        router.replace(\"/frontend/account/login\")\n    }\n})\n\nasync function resetPassword() {\n    try {\n        const url = `/api/method/library_management.api.reset_password?token=${resetToken.value}&new_password=${newPassword.value}`\n\n        const response = await fetch(url, {\n            method: 'POST'\n        })\n        const data = await response.json();\n        console.log(data.message.message)\n        if(data.message.success) {\n            alert(data.message.message)\n            router.replace(\"/frontend/account/login\")\n        } else {\n            alert(data.message.message)\n            router.replace(\"/frontend/account/login\")\n        }\n\n    } catch(error) {\n        alert(\"Failed to reset password!\")\n        router.replace(\"/frontend/account/login\")\n    }\n}\n\n\n\n</script>"],"names":["route","useRoute","router","useRouter","newPassword","ref","resetToken","onMounted","__async","resetPassword","url","data","error","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_Card","_cache","_createElementVNode","_component_Input","$event","_component_Button"],"mappings":"kaA0BA,MAAMA,EAAQC,EAAQ,EAChBC,EAASC,EAAS,EAElBC,EAAcC,EAAI,EAAE,EACpBC,EAAaD,EAAI,EAAE,EAEzBE,EAAU,IAAYC,EAAA,sBAClBF,EAAW,MAAQN,EAAM,MAAM,MAE3BM,EAAW,QACX,MAAM,iCAAiC,EACvCJ,EAAO,QAAQ,yBAAyB,EAEhD,EAAC,EAED,SAAeO,GAAgB,QAAAD,EAAA,sBAC3B,GAAI,CACA,MAAME,EAAM,2DAA2DJ,EAAW,KAAK,iBAAiBF,EAAY,KAAK,GAKnHO,EAAO,MAHI,MAAM,MAAMD,EAAK,CAC9B,OAAQ,MACpB,CAAS,GAC2B,KAAI,EAChC,QAAQ,IAAIC,EAAK,QAAQ,OAAO,EAC7BA,EAAK,QAAQ,QACZ,MAAMA,EAAK,QAAQ,OAAO,EAC1BT,EAAO,QAAQ,yBAAyB,CAMhD,OAAQU,EAAO,CACX,MAAM,2BAA2B,EACjCV,EAAO,QAAQ,yBAAyB,CAC5C,CACJ,8DA7DE,OAAAW,EAAA,EAAAC,EAiBI,MAjBJC,EAiBI,CAhBFC,EAeOC,EAAA,CAfD,MAAM,8BAA8B,MAAM,wFAC5C,IAAiE,CAAjEC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAAiE,KAAA,CAA7D,MAAM,kCAAmC,EAAC,iBAAc,EAAA,GAC5DA,EAYO,OAAA,CAZD,MAAM,iCAAkC,WAAgBV,EAAa,CAAA,SAAA,CAAA,IACvEO,EAOEI,EAAA,CANF,SAAA,cACShB,EAAA,2CAAAA,EAAW,MAAAiB,GACpB,KAAK,WACL,KAAK,WACL,YAAY,eACZ,MAAM,oCAENL,EAESM,EAAA,CAFD,QAAQ,QAAQ,MAAM,iFAAqE,IAEnG,CAAA,GAAAJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFmG,mBAEnG,EAAA"}