{"version":3,"file":"Profile-DlhivV3C.js","sources":["../../../../frontend/src/assets/images/testpro.jpeg","../../../../frontend/src/assets/components/ProfileInfo.vue","../../../../frontend/src/assets/components/ChangePassword.vue","../../../../frontend/src/pages/Profile.vue"],"sourcesContent":["export default \"__VITE_ASSET__CAuA00NF__\"","<template>\n\n<div>\n    <h1 class=\" pl-[20px] pb-[20px] text-[30px] font-bold\">Info</h1>\n    <ul class=\" pl-[20px] space-y-4\">\n        <li>\n            <p class=\" text-black-overlay-500\">ID</p>\n            <p>{{ props.user.id }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Firstname</p>\n            <p>{{ props.user.first_name }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Lastname</p>\n            <p>{{ props.user.last_name }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Email</p>\n            <p>{{ props.user.email }}</p>\n        </li>\n        <li>\n            <p class=\" text-black-overlay-500\">Phone</p>\n            <p>{{ props.user.phone }}</p>\n        </li>\n    </ul>\n</div>\n\n</template>\n\n\n<script setup>\nimport { ref, onMounted } from 'vue';\n\nconst props = defineProps({\n  user: {\n    type: Object,\n    required: true\n  }\n});\n\n</script>","<template>\n\n<div class=\"pl-[30px]\">\n    <Card title=\"Login to your FrappeUI App!\" class=\" z-10  rounded-xl\">\n    <h2 class=\"text-[30px] font-bold mb-8\">Change Password</h2>\n    <form class=\" space-y-5 \" @submit.prevent=\"submit\">\n        <Input\n        required\n        v-model=\"current_password\"\n        name=\"current\"\n        type=\"password\"\n        placeholder=\"Current password\"\n        class=\"w-[300px]\"\n        />\n        <Input\n        required\n        v-model=\"new_password\"\n        name=\"password\"\n        type=\"password\"\n        class=\"w-[300px]\"\n        placeholder=\"New password\"\n        />\n        <Input\n        required\n        v-model=\"re_enter_new_password\"\n        name=\"password\"\n        type=\"password\"\n        class=\"w-[300px]\"\n        placeholder=\"Re-enter new password\"\n        />\n        <div class=\"text-sm text-gray-500 cursor-pointer hover:underline\">\n        Forgot password?\n        </div>\n        <Button @click=\"handleChangePassword\" variant=\"solid\" class=\"bg-[#1290b9] text-white py-2 rounded hover:bg-[#016475] transition\">\n        Chnage Password\n        </Button>\n    </form>\n    </Card>\n</div>\n\n</template>\n\n\n<script setup>\nimport { ref } from 'vue'\n\nconst current_password = ref(\"\");\nconst new_password = ref(\"\");\nconst re_enter_new_password = ref(\"\");\n\nasync function handleChangePassword() {\n    if (current_password.value === new_password.value) {\n        alert(\"New password must be different!\")\n        return\n    }\n    \n    if (new_password.value !== re_enter_new_password.value) {\n        alert(\"Password did not match!\")\n        return\n    }\n\n    try {\n        const url = `/api/method/library_management.api.change_password`\n\n        const response = await fetch(url, {\n            credentials: 'include',\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                old_password: current_password.value,\n                new_password: new_password.value,\n            })\n        })\n        const data = await response.json()\n\n        if (data.message.Success) {\n            alert(\"Password changed succesfully!\")\n        } else {\n            console.log(data)\n            alert(\"Old password is incorrect!\")\n        }\n\n    } catch (error) {\n        console.log(\"Change password failed: \", error)\n        console.error('Error details:', {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        })\n        alert('Change password failed. Please check console for details.')\n    }\n}\n\n\n</script>","<template>\n    <Header></Header>\n    <div class=\"w-[1120px] my-8 mx-auto text-[24px] font-bold relative\">\n        <div class=\"absolute w-1 h-12 bg-[#118ab2] left-0\"></div>\n        <h1 class=\"text-4xl font-bold pl-5 pt-2\">Profile</h1>\n    </div>\n    <section class=\"flex max-w-[1120px] h-[550px] mx-auto my-15\">\n        <!-- Pro Image, Fullname and three buttons -->\n        <div class=\" w-[30%]\">\n            <a @click=\"current = 'ProfileInfo'\">\n                <div class=\"w-[250px] h-[250px] mx-auto my-5 p-[7px] border-[3px] border-[#118ab2] rounded-full\">\n                    <img class=\"m-auto w-[235px] h-[235px] object-fill rounded-[50%]\" src=\"../assets/images/testpro.jpeg\" alt=\"profile image\">\n                </div>\n            </a>\n            <p class=\"w-[50%] m-auto text-center text-[20px] font-bold\">{{ first_name + \" \" + last_name }}</p>\n            <div \n                :class='[\"w-[30%] m-auto rounded-full italic text-[10px]\", statusClasses]'\n            >\n                <p class=\"text-center\"><b>Status:</b> {{ statusText }}</p>\n            </div>\n\n            <!-- Buttons -->\n            <div class=\"flex flex-col items-center space-y-3 mt-5\">\n                <button \n                    @click=\"createCheckoutSession\"\n                    :class='[\" w-[215px] h-[35px] mt-5 bg-[#118ab2] hover:bg-[#016475] text-white-overlay-900 rounded-[10px]\", buyButtonClasses]'\n                >\n                    Buy Membership\n                </button>\n                <button @click=\"current = 'ChangePassword'\">\n                    Change Password >\n                </button>\n                <button>\n                    My Books >\n                </button>\n            </div>\n        </div>\n\n        <!-- Line -->\n        <div class=\"relative h-[475px] w-1 bg-[#118ab2] left-[-1px] top-[20px]\"></div>\n        \n        <!-- Info, Change Password and My Books -->\n        <div class=\"w-[70%]\">\n            <component :is=\"currentComponent\" :user=\"user\" />\n        </div>\n\n    </section>\n    <Footer></Footer>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport Header from '../assets/components/Header.vue';\nimport Footer from '../assets/components/Footer.vue';\nimport ProfileInfo from '../assets/components/ProfileInfo.vue';\nimport ChangePassword from '../assets/components/ChangePassword.vue';\n\nconst componentsMap = {\n    ProfileInfo,\n    ChangePassword\n}\n\nconst current = ref('ProfileInfo')\n\nconst currentComponent = computed(() => componentsMap[current.value])\n\nconst user = ref({})\nconst first_name = ref(\"John\");\nconst last_name = ref(\"Doe\");\nconst membership = ref(false)\nconst checkoutUrl = ref(\"\")\n\nconst statusText = computed(() => {\n    return membership.value ? \"Membership\" : \"Nonmembership\"\n})\n\nconst statusClasses = computed(() => {\n    return membership.value \n        ? \"text-green-700 bg-green-300\" \n        : \"text-red-700 bg-red-300\"\n})\n\nconst buyButtonClasses = computed(() => {\n    return membership.value\n        ? \"opacity-0\"\n        : \"opacity-100\"\n})\n\nonMounted(async () => {\n    try {\n        const response = await fetch('/api/method/library_management.api.profile', {\n            credentials: 'include',\n            method: 'GET',\n            headers: { \"Content-Type\": \"application/json\" }\n        });\n        const data = await response.json();\n\n        first_name.value = data.message.first_name;\n        last_name.value = data.message.last_name;\n        membership.value = false; // TODO library: Temporary value remove it\n        // membership.value = data.message.membership;\n\n        user.value = {\n            id: data.message.id,\n            first_name: data.message.first_name,\n            last_name: data.message.last_name,\n            phone: data.message.phone,\n            email: data.message.email\n        }\n    } catch (error) {\n        console.error('Failed to fetch user info:', error);\n    }\n});\n\nasync function createCheckoutSession() {\n\n    const url = `/api/method/library_management.api.create_checkout_session`;\n\n    const response = await fetch(url, {\n        credentials: 'include',\n        method: 'POST'\n    })\n    const data = await response.json();\n    console.log(data)\n\n    checkoutUrl.value = data.message.url\n    window.href.replace(checkoutUrl)\n\n}\n\n</script>"],"names":["_imports_0","props","__props","_createElementBlock","_cache","_createElementVNode","_hoisted_1","_toDisplayString","current_password","ref","new_password","re_enter_new_password","handleChangePassword","__async","data","error","_openBlock","_createVNode","_component_Card","_ctx","args","_component_Input","$event","_component_Button","componentsMap","ProfileInfo","ChangePassword","current","currentComponent","computed","user","first_name","last_name","membership","checkoutUrl","statusText","statusClasses","buyButtonClasses","onMounted","createCheckoutSession","Header","_hoisted_2","_hoisted_3","_hoisted_4","_createTextVNode","_hoisted_5","_hoisted_6","_createBlock","_resolveDynamicComponent","Footer"],"mappings":"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"}