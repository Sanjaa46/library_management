var l=(f,a,s)=>new Promise((c,r)=>{var d=e=>{try{o(s.next(e))}catch(n){r(n)}},u=e=>{try{o(s.throw(e))}catch(n){r(n)}},o=e=>e.done?c(e.value):Promise.resolve(e.value).then(d,u);o((s=s.apply(f,a)).next())});import{r as p,C as g,l as w,m as y,n as t,q as i,v,D as x}from"./index-DTolKnbg.js";const k={class:"max-w-[100%] m-3 grid grid-cols-2 h-screen"},L={class:"flex items-center justify-center"},_={class:"flex flex-col space-y-5 w-full"},I={__name:"Login",setup(f){const a=p(""),s=p(""),c=p("member");function r(){return l(this,null,function*(){c.value==="member"?yield d():yield u()})}function d(){return l(this,null,function*(){console.log("Email:",a.value),console.log("Timestamp:",new Date().toISOString());try{const o=yield fetch("http://localhost:8000/api/method/library_management.auth.login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:s.value})});console.log("Response loginLibraryMember Status:",o.status),console.log("Response OK:",o.ok);const e=yield o.json();console.log("Response Data:",e),e.message&&e.message.access_token?(localStorage.setItem("library_token",e.message.access_token),console.log("Token saved successfully to local storage"),console.log("Token:",e.message.access_token.substring(0,20)+"..."),alert("Login successful!")):(console.error("Login failed - No access token in response"),console.error("Response structure:",JSON.stringify(e,null,2)),alert("Invalid Member login"))}catch(o){console.error("Login error occurred:",o),console.error("Error details:",{name:o.name,message:o.message,stack:o.stack}),alert("Login failed. Please check console for details.")}})}function u(){return l(this,null,function*(){try{alert("Hello"),(yield(yield fetch("/api/method/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({usr:a.value,pwd:s.value})})).json()).message==="Logged In"?window.location.href="/app":alert("Invalid staff login")}catch(o){console.error("Login error occurred:",o),console.error("Error details:",{name:o.name,message:o.message,stack:o.stack}),alert("Login failed. Please check console for details.")}})}return(o,e)=>{const n=g("Input"),h=g("Button"),b=g("Card");return y(),w("div",k,[t("div",L,[i(b,{title:"Login to your FrappeUI App!",class:"w-full max-w-md bg-[#f7f4f0] z-10 px-12 py-10 rounded-xl shadow-lg"},{default:v(()=>[e[4]||(e[4]=t("h2",{class:"text-xl font-medium text-center mb-8"},"Sign In",-1)),t("form",_,[i(n,{required:"",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=m=>a.value=m),name:"email",type:"text",placeholder:"Email"},null,8,["modelValue"]),i(n,{required:"",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=m=>s.value=m),name:"password",type:"password",placeholder:"Password"},null,8,["modelValue"]),e[3]||(e[3]=t("div",{class:"text-sm text-right text-gray-500 cursor-pointer hover:underline"}," Forgot password? ",-1)),i(h,{onClick:r,variant:"solid",class:"bg-[#007C91] text-white py-2 rounded hover:bg-[#006273] transition"},{default:v(()=>[...e[2]||(e[2]=[x(" Login ",-1)])]),_:1})]),e[5]||(e[5]=t("div",{class:"text-center mt-6 text-sm"},[x(" Don't have an account? "),t("a",{href:"/account/signup",class:"text-blue-600 hover:underline"}," Sign up ")],-1))]),_:1})]),e[6]||(e[6]=t("div",{class:"relative overflow-hidden -m-10"},[t("div",{class:"bg-[#2C3E50] w-[100%] h-[120%] absolute -top-20 right-[-100px] -rotate-12 origin-top-right rounded-tl-[20px]"}),t("div",{class:"bg-[#254B71] w-[150%] h-[150%] absolute bottom-[8px] right-[-400px] rotate-[60deg] origin-bottom-left"}),t("div",{class:"bg-[#577592] w-[85%] h-[60%] absolute top-[-380px] right-[40px] rotate-12 rounded-bl-[20px] rounded-br-[20px]"})],-1))])}}};export{I as default};
//# sourceMappingURL=Login-BY_LCqTc.js.map
