{"version":3,"file":"MembershipSuccess-DboBvdqt.js","sources":["../../../../frontend/src/assets/images/success.png","../../../../frontend/src/pages/MembershipSuccess.vue"],"sourcesContent":["export default \"__VITE_ASSET__xKN6$zI2__\"","<template>\n    <Header></Header>\n\n    <div class=\"w-[1120px] my-8 mx-auto text-[24px] font-bold relative\">\n        <div class=\"absolute w-1 h-12 bg-[#118ab2] left-0\"></div>\n        <h1 class=\"text-4xl font-bold pl-5 pt-2\">Membership Success</h1>\n    </div>\n\n    <section class=\"flex flex-col items-center justify-center max-w-[1120px] h-[600px] mx-auto my-15 \">\n        <img src=\"../assets/images/success.png\" class=\"w-[400px] h-[400px]\" alt=\"Membership Success\">\n        <h2 class=\"text-2xl font-bold mt-[30px]\">Thank you for your membership!</h2>\n        <p class=\"text-lg\">You can now access library resources.</p>\n        <Button variant=\"solid\" class=\"bg-[#118ab2] hover:bg-[#016475] text-white-overlay-900 rounded-[10px] w-[200px] h-[40px] mt-[30px]\" @click=\"goToLibrary\">\n            Go to Library\n        </Button>\n    </section>\n\n    <Footer></Footer>\n</template>\n\n<script setup>\nimport Header from '../assets/components/Header.vue';\nimport Footer from '../assets/components/Footer.vue';\nimport { ref, onMounted } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\n\nconst router = useRouter();\nconst route = useRoute();\n\nconst sessionId = ref(\"\");\nconst isVerifying = ref(false);\nconst verificationError = ref(\"\");\n\nonMounted(() => {\n    // Extract sessionId from url\n    sessionId.value = route.query.session_id;\n\n    if (sessionId.value) {\n        verifyPaymentSession(sessionId.value);\n    } else {\n        console.error(\"No session ID found\");\n    }\n})\n\nasync function verifyPaymentSession(sessionId) {\n    isVerifying.value = true;\n\n    try {\n        const response = await fetch(`/api/method/library_management.api.verify_checkout_session?session_id=${sessionId.value}`, {\n            credentials: 'include',\n            method: 'GET'\n        });\n        const data = await response.json();\n\n        if (data.message && data.message.verified) {\n            console.log(\"Payment verified\");\n        }\n    } catch (error) {\n        verificationError.value = 'Could not verify payment. Please contact support.';\n        console.error('verification error: ', error);\n    } finally {\n        isVerifying.value = false;\n    }\n}\n\nfunction goToLibrary() {\n    router.push('/frontend');\n}\n\n</script>"],"names":["_imports_0","router","useRouter","route","useRoute","sessionId","ref","isVerifying","verificationError","onMounted","verifyPaymentSession","__async","data","error","goToLibrary","_createVNode","Header","_createElementVNode","_hoisted_1","_cache","_component_Button","Footer"],"mappings":"kXAAA,MAAAA,EAAe,sMC0Bf,MAAMC,EAASC,EAAS,EAClBC,EAAQC,EAAQ,EAEhBC,EAAYC,EAAI,EAAE,EAClBC,EAAcD,EAAI,EAAK,EACvBE,EAAoBF,EAAI,EAAE,EAEhCG,EAAU,IAAM,CAEZJ,EAAU,MAAQF,EAAM,MAAM,WAE1BE,EAAU,MACVK,EAAqBL,EAAU,KAAK,EAEpC,QAAQ,MAAM,qBAAqB,CAE3C,CAAC,EAED,SAAeK,EAAqBL,EAAW,QAAAM,EAAA,sBAC3CJ,EAAY,MAAQ,GAEpB,GAAI,CAKA,MAAMK,EAAO,MAJI,MAAM,MAAM,yEAAyEP,EAAU,KAAK,GAAI,CACrH,YAAa,UACb,OAAQ,KACpB,CAAS,GAC2B,KAAI,EAE5BO,EAAK,SAAWA,EAAK,QAAQ,UAC7B,QAAQ,IAAI,kBAAkB,CAEtC,OAASC,EAAO,CACZL,EAAkB,MAAQ,oDAC1B,QAAQ,MAAM,uBAAwBK,CAAK,CAC/C,QAAC,CACGN,EAAY,MAAQ,EACxB,CACJ,GAEA,SAASO,GAAc,CACnBb,EAAO,KAAK,WAAW,CAC3B,wDAlEIc,EAAiBC,CAAA,cAEjBC,EAGM,MAAA,CAHD,MAAM,0DAAwD,CAC/DA,EAAyD,MAAA,CAApD,MAAM,uCAAuC,CAAA,EAClDA,EAAgE,KAAA,CAA5D,MAAM,8BAA8B,EAAC,oBAAkB,QAG/DA,EAOU,UAPVC,EAOU,aANND,EAA6F,MAAA,CAAxF,IAAAjB,EAAmC,MAAM,sBAAsB,IAAI,gCACxEmB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA4E,KAAA,CAAxE,MAAM,8BAA8B,EAAC,iCAA8B,EAAA,GACvEE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAA4D,IAAA,CAAzD,MAAM,SAAS,EAAC,wCAAqC,EAAA,GACxDF,EAESK,EAAA,CAFD,QAAQ,QAAQ,MAAM,qGAAsG,QAAON,cAAa,IAExJ,CAAA,GAAAK,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFwJ,kBAExJ,EAAA,cAGJJ,EAAiBM,CAAA"}